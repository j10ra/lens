---
phase: 03-cli-dashboard
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/ui/package.json
  - packages/ui/tsconfig.json
  - packages/ui/components.json
  - packages/ui/src/index.ts
  - packages/ui/src/globals.css
  - packages/ui/src/lib/utils.ts
  - packages/ui/src/components/ui/badge.tsx
  - packages/ui/src/components/ui/button.tsx
  - packages/ui/src/components/ui/card.tsx
  - packages/ui/src/components/ui/checkbox.tsx
  - packages/ui/src/components/ui/separator.tsx
  - packages/ui/src/components/ui/sheet.tsx
  - packages/ui/src/components/ui/sidebar.tsx
  - packages/ui/src/components/ui/switch.tsx
  - packages/ui/src/components/ui/table.tsx
  - packages/ui/src/components/ui/tabs.tsx
  - packages/ui/src/components/AppSidebar.tsx
  - packages/ui/src/components/Logo.tsx
  - packages/ui/src/components/ModeToggle.tsx
  - packages/ui/src/components/NavUser.tsx
  - packages/ui/src/components/PageHeader.tsx
autonomous: true
requirements: [DASH-05]

must_haves:
  truths:
    - "packages/ui/ exists as @lens/ui workspace package"
    - "All 10 shadcn primitives ported from v1-archive with ZERO modifications"
    - "All 5 shared components (AppSidebar, Logo, ModeToggle, NavUser, PageHeader) ported from v1-archive"
    - "globals.css has OKLCH theme with --success, --warning, dark mode"
    - "Barrel index.ts exports all components and cn() utility"
    - "pnpm install resolves @lens/ui as workspace dependency"
  artifacts:
    - path: "packages/ui/package.json"
      provides: "@lens/ui package with peer deps on react"
      contains: "@lens/ui"
    - path: "packages/ui/src/index.ts"
      provides: "Barrel export of all components and cn()"
      exports: ["AppSidebar", "Logo", "ModeToggle", "PageHeader", "Badge", "Button", "Card", "Sheet", "Sidebar", "SidebarProvider", "Table", "Tabs", "cn"]
    - path: "packages/ui/src/globals.css"
      provides: "OKLCH theme variables, dark mode, --success/--warning"
      contains: "--success"
    - path: "packages/ui/src/components/ui/sidebar.tsx"
      provides: "Sidebar primitives with collapsible icon mode"
      exports: ["Sidebar", "SidebarProvider", "SidebarInset", "SidebarTrigger"]
  key_links:
    - from: "packages/ui/src/index.ts"
      to: "packages/ui/src/components/ui/*.tsx"
      via: "re-exports"
      pattern: "export.*from.*components/ui"
    - from: "packages/ui/src/components/AppSidebar.tsx"
      to: "packages/ui/src/components/ui/sidebar.tsx"
      via: "import sidebar primitives"
      pattern: "import.*sidebar"
---

<objective>
Create @lens/ui shared package — port ALL shadcn primitives and shared layout components from v1-archive.

Purpose: Shared UI package per user decision. Maintains branding across dashboard (and any future consumer). packages/ui/ owns all components, apps/dashboard/ imports from @lens/ui.
Output: @lens/ui workspace package with 10 shadcn primitives, 5 layout components, OKLCH theme, barrel exports.
</objective>

<execution_context>
@/Users/jalipalo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jalipalo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: @lens/ui package scaffold, theme, utils</name>
  <files>
    packages/ui/package.json
    packages/ui/tsconfig.json
    packages/ui/components.json
    packages/ui/src/globals.css
    packages/ui/src/lib/utils.ts
  </files>
  <action>
Create `packages/ui/` directory structure.

**1. package.json** — EXACT copy from v1-archive (`git show v1-archive:packages/ui/package.json`). The v1 package.json is already correct: `"name": "@lens/ui"`, `"private": true`, exports `"."` -> `"./src/index.ts"` and `"./globals.css"` -> `"./src/globals.css"`, peer deps on react/react-dom, dependencies on radix/cva/clsx/tailwind-merge/lucide-react/fontsource-inter/tw-animate-css. Copy verbatim.

**2. tsconfig.json** — EXACT copy from v1-archive (`git show v1-archive:packages/ui/tsconfig.json`): ES2022, bundler resolution, `@/*` path alias to `./src/*`, noEmit.

**3. components.json** — EXACT copy from v1-archive (`git show v1-archive:packages/ui/components.json`): shadcn config with `rsc: false`, `@/` aliases.

**4. src/globals.css** — EXACT copy from v1-archive (`git show v1-archive:packages/ui/src/globals.css`): OKLCH theme with `--success`, `--warning`, dark mode via `.dark` class, `@custom-variant dark`, `@import "tailwindcss"`, `@import "tw-animate-css"`, `@import "@fontsource-variable/inter"`, `@theme inline` block. Do NOT modify any values.

**5. src/lib/utils.ts** — EXACT copy from v1-archive (`git show v1-archive:packages/ui/src/lib/utils.ts`): standard shadcn `cn()` (clsx + twMerge).

After creating files, run `pnpm install` to register the workspace package.
  </action>
  <verify>
1. `pnpm install` succeeds (new workspace package detected)
2. `ls packages/ui/src/globals.css` exists
3. `grep "success" packages/ui/src/globals.css` confirms --success variable
  </verify>
  <done>
@lens/ui package exists with correct package.json, tsconfig, components.json. globals.css has full OKLCH theme. utils.ts has cn(). pnpm recognizes workspace package.
  </done>
</task>

<task type="auto">
  <name>Task 2: Port all shadcn primitives and shared components from v1-archive</name>
  <files>
    packages/ui/src/components/ui/badge.tsx
    packages/ui/src/components/ui/button.tsx
    packages/ui/src/components/ui/card.tsx
    packages/ui/src/components/ui/checkbox.tsx
    packages/ui/src/components/ui/separator.tsx
    packages/ui/src/components/ui/sheet.tsx
    packages/ui/src/components/ui/sidebar.tsx
    packages/ui/src/components/ui/switch.tsx
    packages/ui/src/components/ui/table.tsx
    packages/ui/src/components/ui/tabs.tsx
    packages/ui/src/components/AppSidebar.tsx
    packages/ui/src/components/Logo.tsx
    packages/ui/src/components/ModeToggle.tsx
    packages/ui/src/components/NavUser.tsx
    packages/ui/src/components/PageHeader.tsx
    packages/ui/src/index.ts
  </files>
  <action>
**1. Port ALL 10 shadcn primitives — VERBATIM from v1-archive, ZERO modifications:**

For each file, `git show v1-archive:packages/ui/src/components/ui/{file}` and write to same path. These files already use `@/lib/utils` which resolves correctly within packages/ui/.

Files: badge.tsx, button.tsx, card.tsx, checkbox.tsx, separator.tsx, sheet.tsx, sidebar.tsx, switch.tsx, table.tsx, tabs.tsx.

Do NOT modify any import paths — they already use `@/lib/utils` and `@/components/ui/*` which are correct for the packages/ui/ context.

**2. Port ALL 5 shared layout components — VERBATIM from v1-archive:**

For each: `git show v1-archive:packages/ui/src/components/{file}` and write to same path.

Files: AppSidebar.tsx, Logo.tsx, ModeToggle.tsx, NavUser.tsx, PageHeader.tsx.

These already import from `./ui/sidebar`, `./ui/badge`, `./Logo`, `./ModeToggle` etc — all relative imports that resolve within packages/ui/.

**3. Barrel export — EXACT copy from v1-archive:**

`git show v1-archive:packages/ui/src/index.ts` and write to `packages/ui/src/index.ts`. This exports all components, types (NavGroup, NavItem), and `cn` utility.

**4. Verify no import path issues:**
All internal imports use either `@/lib/utils` (tsconfig path alias) or relative `./` paths — both resolve within packages/ui/. No `@lens/ui` self-references.
  </action>
  <verify>
1. `ls packages/ui/src/components/ui/` shows all 10 files
2. `ls packages/ui/src/components/AppSidebar.tsx` exists
3. `grep "export" packages/ui/src/index.ts` shows all exports
4. No `@lens/dashboard` or `apps/dashboard` imports exist in packages/ui/ (grep confirms isolation)
  </verify>
  <done>
All 10 shadcn primitives and 5 shared components ported verbatim from v1-archive. Barrel index.ts exports everything. Package is self-contained — all imports resolve within packages/ui/.
  </done>
</task>

</tasks>

<verification>
- `pnpm install` succeeds
- packages/ui/src/index.ts exports AppSidebar, Logo, ModeToggle, NavUser, PageHeader, Badge, Button, Card, Sheet, Sidebar, SidebarProvider, Table, Tabs, cn
- packages/ui/src/globals.css has OKLCH theme with --success, --warning
- All 10 shadcn files exist under packages/ui/src/components/ui/
- All 5 shared component files exist under packages/ui/src/components/
- No imports reference apps/dashboard or @lens/dashboard
</verification>

<success_criteria>
@lens/ui is a complete, self-contained workspace package with all v1 UI primitives and shared components. Ready to be consumed by apps/dashboard/ via `@lens/ui` imports.
</success_criteria>

<output>
After completion, create `.planning/phases/03-cli-dashboard/03-02-SUMMARY.md`
</output>
